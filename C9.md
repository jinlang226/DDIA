一致性与共识  Consistency and Consensus

# 一致性保证 Consistency Guarantees
* A better name for **eventual consistency** may be **convergence**, as we expect all replicas to eventually converge to the same value
* 事务隔离主要是为了，避免由于同时执行事务而导致的竞争状态，而分布式一致性主要关于，面对延迟和故障时，如何协调副本间的状态。

# 线性一致性 Linearizability
* The basic idea is to make a system appear as if there were only one copy of the data, and all operations on it are atomic.
* Maintaining the illusion of a single copy of the data means guaranteeing that the value read is the most recent, up-to-date value, and doesn’t come from a stale cache or replica.

## What Makes a System Linearizable?
* $read(x)⇒v$表示客户端请求读取寄存器 x 的值，数据库返回值 v。
* $write(x,v)⇒r$ 表示客户端请求将寄存器 x 设置为值 v ，数据库返回响应 r （可能正确，可能错误）。
* $cas(x, v_{old}, v_{new})⇒r$ 表示客户端请求进行原子性的比较与设置操作。如果寄存器 $x$ 的当前值等于 $v_{old}$ ，则应该原子地设置为 $v_{new}$ 。如果 $x \neq v_{old}$ ，则操作应该保持寄存器不变并返回一个错误。 $r$ 是数据库的响应（正确或错误）。
* 通过记录所有请求和响应的时序，并检查它们是否可以排列成有效的顺序，测试一个系统的行为是否线性一致性是可能的（尽管在计算上是昂贵的）

## Relying on Linearizability

### Locking and leader election 锁定和领导选举
* Coordination services like Apache ZooKeeper [15] and etcd [16] are often used to implement distributed locks and leader election.
* Distributed locking is also used at a much more granular level in some distributed databases, such as Oracle Real Application Clusters (RAC) 

### Constraints and uniqueness guarantees 约束和唯一性保证


### Cross-channel timing dependencies 跨信道的时序依赖

## Implementing Linearizable Systems 实现线性一致的系统
